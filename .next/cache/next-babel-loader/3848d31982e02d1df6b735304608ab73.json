{"ast":null,"code":"// const path = require('path');\n// require('dotenv').config({path: path.join(__dirname, '../.env')});\nconst SibApiV3Sdk = require('sib-api-v3-sdk'); // console.log(SibApiV3Sdk.ApiClient.instance)\n\n\nconst defaultClient = SibApiV3Sdk.ApiClient.instance; // const moment = require('moment');\n// Configure API key authorization: api-key\n\nlet apiKey = defaultClient.authentications['api-key'];\napiKey.apiKey = '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'; // // // Configure API key authorization: partner-key\n// let partnerKey = defaultClient.authentications['partner-key'];\n// partnerKey.apiKey = process.env.SIBKEY;\n// // send contact form submitted\n\nfunction sendContactForm(name, email, subject, phone, message) {\n  const apiInstance = new SibApiV3Sdk.SMTPApi();\n  let sendSmtpEmail = new SibApiV3Sdk.SendSmtpEmail();\n  sendSmtpEmail.sender = {\n    name: 'Greenscapes Gardening Sevices',\n    email: 'simon@greenscapes-gardening.co.uk'\n  };\n  sendSmtpEmail.to = [{\n    email: email,\n    name: name\n  }];\n  sendSmtpEmail.bcc = [{\n    email: 'simon@greenscapes-gardening.co.uk'\n  }];\n  sendSmtpEmail.replyTo = {\n    email: email\n  };\n  sendSmtpEmail.templateId = 1;\n  sendSmtpEmail.tags = ['support'];\n  sendSmtpEmail.params = {\n    FIRSTNAME: name,\n    MESSAGE: message,\n    PHONE: phone,\n    EMAIL: email\n  };\n  apiInstance.sendTransacEmail(sendSmtpEmail).then(res => console.log(res)).catch(e => console.log(e));\n} // create new contact\n\n\nfunction createNewContact(name, email, subject, phone, message) {\n  const apiInstance = new SibApiV3Sdk.ContactsApi();\n  let createContact = new SibApiV3Sdk.CreateContact();\n  createContact.email = email;\n  createContact.attributes = {\n    FIRSTNAME: name,\n    PHONENUMBER: phone\n  };\n  createContact.listIds = [3];\n  apiInstance.createContact(createContact).then(res => {\n    console.log(res);\n    return {\n      success: true,\n      msg: 'User added'\n    };\n  }).catch(e => console.log(e));\n}\n\nmodule.exports = {\n  sendContactForm,\n  createNewContact\n};","map":{"version":3,"sources":["/Users/user1/Documents/development/greenscapes/greenscapes-domestic/utils/sib.helpers.js"],"names":["SibApiV3Sdk","require","defaultClient","ApiClient","instance","apiKey","authentications","sendContactForm","name","email","subject","phone","message","apiInstance","SMTPApi","sendSmtpEmail","SendSmtpEmail","sender","to","bcc","replyTo","templateId","tags","params","FIRSTNAME","MESSAGE","PHONE","EMAIL","sendTransacEmail","then","res","console","log","catch","e","createNewContact","ContactsApi","createContact","CreateContact","attributes","PHONENUMBER","listIds","success","msg","module","exports"],"mappings":"AAAA;AACA;AAEA,MAAMA,WAAW,GAAGC,OAAO,CAAC,gBAAD,CAA3B,C,CACA;;;AACA,MAAMC,aAAa,GAAGF,WAAW,CAACG,SAAZ,CAAsBC,QAA5C,C,CAEA;AAEA;;AACA,IAAIC,MAAM,GAAGH,aAAa,CAACI,eAAd,CAA8B,SAA9B,CAAb;AACAD,MAAM,CAACA,MAAP,GAAgB,2FAAhB,C,CAEA;AACA;AACA;AAEA;;AACA,SAASE,eAAT,CAA0BC,IAA1B,EAAgCC,KAAhC,EAAuCC,OAAvC,EAAgDC,KAAhD,EAAuDC,OAAvD,EAAgE;AAC5D,QAAMC,WAAW,GAAG,IAAIb,WAAW,CAACc,OAAhB,EAApB;AACA,MAAIC,aAAa,GAAG,IAAIf,WAAW,CAACgB,aAAhB,EAApB;AAEAD,EAAAA,aAAa,CAACE,MAAd,GAAuB;AACnBT,IAAAA,IAAI,EAAE,+BADa;AAEnBC,IAAAA,KAAK,EAAE;AAFY,GAAvB;AAIAM,EAAAA,aAAa,CAACG,EAAd,GAAmB,CACf;AAAET,IAAAA,KAAK,EAAEA,KAAT;AAAgBD,IAAAA,IAAI,EAAEA;AAAtB,GADe,CAAnB;AAGAO,EAAAA,aAAa,CAACI,GAAd,GAAoB,CAAC;AACjBV,IAAAA,KAAK,EAAE;AADU,GAAD,CAApB;AAGAM,EAAAA,aAAa,CAACK,OAAd,GAAwB;AAAEX,IAAAA,KAAK,EAAEA;AAAT,GAAxB;AACAM,EAAAA,aAAa,CAACM,UAAd,GAA2B,CAA3B;AACAN,EAAAA,aAAa,CAACO,IAAd,GAAqB,CAAC,SAAD,CAArB;AACAP,EAAAA,aAAa,CAACQ,MAAd,GAAuB;AACnBC,IAAAA,SAAS,EAAEhB,IADQ;AAEnBiB,IAAAA,OAAO,EAAEb,OAFU;AAGnBc,IAAAA,KAAK,EAAEf,KAHY;AAInBgB,IAAAA,KAAK,EAAElB;AAJY,GAAvB;AAMAI,EAAAA,WAAW,CAACe,gBAAZ,CAA6Bb,aAA7B,EACCc,IADD,CACMC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CADb,EAECG,KAFD,CAEOC,CAAC,IAAIH,OAAO,CAACC,GAAR,CAAYE,CAAZ,CAFZ;AAGH,C,CAED;;;AACA,SAASC,gBAAT,CAA2B3B,IAA3B,EAAiCC,KAAjC,EAAwCC,OAAxC,EAAiDC,KAAjD,EAAwDC,OAAxD,EAAiE;AAC7D,QAAMC,WAAW,GAAG,IAAIb,WAAW,CAACoC,WAAhB,EAApB;AACA,MAAIC,aAAa,GAAG,IAAIrC,WAAW,CAACsC,aAAhB,EAApB;AACAD,EAAAA,aAAa,CAAC5B,KAAd,GAAsBA,KAAtB;AACA4B,EAAAA,aAAa,CAACE,UAAd,GAA2B;AACvBf,IAAAA,SAAS,EAAEhB,IADY;AAEvBgC,IAAAA,WAAW,EAAE7B;AAFU,GAA3B;AAIA0B,EAAAA,aAAa,CAACI,OAAd,GAAwB,CAAC,CAAD,CAAxB;AACA5B,EAAAA,WAAW,CAACwB,aAAZ,CAA0BA,aAA1B,EACCR,IADD,CACOC,GAAD,IAAS;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,WAAQ;AAAEY,MAAAA,OAAO,EAAE,IAAX;AAAiBC,MAAAA,GAAG,EAAE;AAAtB,KAAR;AACH,GAJD,EAKCV,KALD,CAKOC,CAAC,IAAIH,OAAO,CAACC,GAAR,CAAYE,CAAZ,CALZ;AAMH;;AAEDU,MAAM,CAACC,OAAP,GAAiB;AACbtC,EAAAA,eADa;AAEb4B,EAAAA;AAFa,CAAjB","sourcesContent":["// const path = require('path');\n// require('dotenv').config({path: path.join(__dirname, '../.env')});\n\nconst SibApiV3Sdk = require('sib-api-v3-sdk');\n// console.log(SibApiV3Sdk.ApiClient.instance)\nconst defaultClient = SibApiV3Sdk.ApiClient.instance;\n\n// const moment = require('moment');\n\n// Configure API key authorization: api-key\nlet apiKey = defaultClient.authentications['api-key'];\napiKey.apiKey = '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'\n\n// // // Configure API key authorization: partner-key\n// let partnerKey = defaultClient.authentications['partner-key'];\n// partnerKey.apiKey = process.env.SIBKEY;\n\n// // send contact form submitted\nfunction sendContactForm (name, email, subject, phone, message) {\n    const apiInstance = new SibApiV3Sdk.SMTPApi();\n    let sendSmtpEmail = new SibApiV3Sdk.SendSmtpEmail();\n    \n    sendSmtpEmail.sender = {\n        name: 'Greenscapes Gardening Sevices',\n        email: 'simon@greenscapes-gardening.co.uk'\n    }\n    sendSmtpEmail.to = [\n        { email: email, name: name }        \n    ];\n    sendSmtpEmail.bcc = [{\n        email: 'simon@greenscapes-gardening.co.uk'\n    }]\n    sendSmtpEmail.replyTo = { email: email };\n    sendSmtpEmail.templateId = 1;\n    sendSmtpEmail.tags = ['support'];\n    sendSmtpEmail.params = {\n        FIRSTNAME: name,\n        MESSAGE: message,\n        PHONE: phone,\n        EMAIL: email\n    }\n    apiInstance.sendTransacEmail(sendSmtpEmail)\n    .then(res => console.log(res))\n    .catch(e => console.log(e))\n}\n\n// create new contact\nfunction createNewContact (name, email, subject, phone, message) {\n    const apiInstance = new SibApiV3Sdk.ContactsApi();\n    let createContact = new SibApiV3Sdk.CreateContact();\n    createContact.email = email;\n    createContact.attributes = {\n        FIRSTNAME: name,\n        PHONENUMBER: phone\n    }\n    createContact.listIds = [3];\n    apiInstance.createContact(createContact)\n    .then((res) => {\n        console.log(res)\n        return ({ success: true, msg: 'User added' })\n    })\n    .catch(e => console.log(e))\n}\n\nmodule.exports = {\n    sendContactForm,\n    createNewContact\n}"]},"metadata":{},"sourceType":"script"}