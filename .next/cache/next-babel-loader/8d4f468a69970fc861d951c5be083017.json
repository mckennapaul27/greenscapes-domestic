{"ast":null,"code":"var _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar path = require('path');\n\nrequire('dotenv').config({\n  path: path.join(__dirname, '../.env')\n});\n\nvar nodemailer = require('nodemailer');\n\nvar nodeMailerPass = process.env.nodeMailerPass;\nvar nodeMailerUser = process.env.nodeMailerUser;\nvar transporter = nodemailer.createTransport({\n  host: 'smtp.zoho.eu',\n  port: 465,\n  secure: true,\n  //ssl\n  auth: {\n    user: nodeMailerUser,\n    pass: nodeMailerPass\n  }\n}); // // send contact form submitted\n\nfunction sendContactForm(name, email, subject, phone, message) {\n  var date, mailOptions;\n  return _regeneratorRuntime.async(function sendContactForm$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          date = dayjs().format('MMM Do YYYY');\n          mailOptions = {\n            // from: nodeMailerUser, // sender address (who sends)\n            from: {\n              // from using address object\n              name: 'Greenscapes Gardening',\n              address: nodeMailerUser\n            },\n            to: email,\n            // list of receivers (who receives)\n            cc: nodeMailerUser,\n            subject: \"We have received your enquiry\",\n            // Subject line\n            replyTo: email,\n            html: \"<b>\".concat(date, \"</b> <p>Email: \").concat(email, \"</p> <p>Name: \").concat(name, \"</p> <p>Phone: \").concat(phone, \"</p> <p>Message: \").concat(message, \"</p>\") // html body\n\n          };\n          return _context.abrupt(\"return\", transporter.sendMail(mailOptions).then(function (res) {\n            console.log(res);\n          })[\"catch\"](function (error) {\n            console.log(error);\n          }));\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nmodule.exports = {\n  sendContactForm: sendContactForm\n};","map":{"version":3,"sources":["/Users/user1/Documents/development/greenscapes/greenscapes-domestic/utils/nodemailer.js"],"names":["path","require","config","join","__dirname","nodemailer","nodeMailerPass","process","env","nodeMailerUser","transporter","createTransport","host","port","secure","auth","user","pass","sendContactForm","name","email","subject","phone","message","date","dayjs","format","mailOptions","from","address","to","cc","replyTo","html","sendMail","then","res","console","log","error","module","exports"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,CAAyB;AAACF,EAAAA,IAAI,EAAEA,IAAI,CAACG,IAAL,CAAUC,SAAV,EAAqB,SAArB;AAAP,CAAzB;;AAEA,IAAMC,UAAU,GAAGJ,OAAO,CAAC,YAAD,CAA1B;;AACA,IAAMK,cAAc,GAAGC,OAAO,CAACC,GAAR,CAAYF,cAAnC;AACA,IAAMG,cAAc,GAAGF,OAAO,CAACC,GAAR,CAAYC,cAAnC;AAEA,IAAMC,WAAW,GAAGL,UAAU,CAACM,eAAX,CAA2B;AAC3CC,EAAAA,IAAI,EAAE,cADqC;AAE3CC,EAAAA,IAAI,EAAE,GAFqC;AAG3CC,EAAAA,MAAM,EAAE,IAHmC;AAG7B;AACdC,EAAAA,IAAI,EAAE;AACFC,IAAAA,IAAI,EAAEP,cADJ;AAEFQ,IAAAA,IAAI,EAAEX;AAFJ;AAJqC,CAA3B,CAApB,C,CAUA;;AACA,SAAeY,eAAf,CAAgCC,IAAhC,EAAsCC,KAAtC,EAA6CC,OAA7C,EAAsDC,KAAtD,EAA6DC,OAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AACUC,UAAAA,IADV,GACiBC,KAAK,GAAGC,MAAR,CAAe,aAAf,CADjB;AAGQC,UAAAA,WAHR,GAGsB;AACd;AACAC,YAAAA,IAAI,EAAE;AAAE;AACJT,cAAAA,IAAI,EAAE,uBADJ;AAEFU,cAAAA,OAAO,EAAEpB;AAFP,aAFQ;AAMdqB,YAAAA,EAAE,EAAEV,KANU;AAMH;AACXW,YAAAA,EAAE,EAAEtB,cAPU;AAQdY,YAAAA,OAAO,iCARO;AAQ4B;AAC1CW,YAAAA,OAAO,EAAEZ,KATK;AAUda,YAAAA,IAAI,eAAQT,IAAR,4BAA8BJ,KAA9B,2BAAoDD,IAApD,4BAA0EG,KAA1E,8BAAmGC,OAAnG,SAVU,CAUuG;;AAVvG,WAHtB;AAAA,2CAgBWb,WAAW,CAACwB,QAAZ,CAAqBP,WAArB,EACNQ,IADM,CACD,UAAAC,GAAG,EAAI;AACTC,YAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,WAHM,WAIA,UAAAG,KAAK,EAAI;AACZF,YAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACH,WANM,CAhBX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0BAC,MAAM,CAACC,OAAP,GAAiB;AACbvB,EAAAA,eAAe,EAAfA;AADa,CAAjB","sourcesContent":["const path = require('path');\nrequire('dotenv').config({path: path.join(__dirname, '../.env')});\n\nconst nodemailer = require('nodemailer');\nconst nodeMailerPass = process.env.nodeMailerPass;\nconst nodeMailerUser = process.env.nodeMailerUser;\n\nconst transporter = nodemailer.createTransport({\n    host: 'smtp.zoho.eu',\n    port: 465,\n    secure: true, //ssl\n    auth: {\n        user: nodeMailerUser,\n        pass: nodeMailerPass\n    }\n});\n\n// // send contact form submitted\nasync function sendContactForm (name, email, subject, phone, message) {\n    const date = dayjs().format('MMM Do YYYY');\n\n    let mailOptions = {\n        // from: nodeMailerUser, // sender address (who sends)\n        from: { // from using address object\n            name: 'Greenscapes Gardening',\n            address: nodeMailerUser\n        },\n        to: email, // list of receivers (who receives)\n        cc: nodeMailerUser,\n        subject: `We have received your enquiry`, // Subject line\n        replyTo: email,\n        html: `<b>${date}</b> <p>Email: ${email}</p> <p>Name: ${name}</p> <p>Phone: ${phone}</p> <p>Message: ${message}</p>` // html body\n    };\n\n    return transporter.sendMail(mailOptions)\n    .then(res => {\n        console.log(res);\n    })\n    .catch(error => {\n        console.log(error);\n    })\n}\n\n\nmodule.exports = {\n    sendContactForm,\n}"]},"metadata":{},"sourceType":"script"}